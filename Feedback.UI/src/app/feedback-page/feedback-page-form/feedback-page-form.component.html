<form #form="ngForm" (submit)="onSubmit(form)" *ngIf="!this.service.formSubmitted" [class.submitted]="service.formSubmitted" novalidate autocomplete="off" style="margin-bottom: 30px !important;">
  <div class="form-group row" style="width: 500px;">
    <label for="inputName" style="padding: 6px 1px 25px;" 
    class="font-weight-bold col-sm-2 col-form-label">
      Ваше имя:
    </label>

    <div class="col-sm-10">
      <div class="input-group mb-2">
      <div class="input-group-prepend">
        <div class="input-group-text"><i class="fa fa-user icon"></i></div>
      </div>
      <input type="text" class="form-control" name="ContactName" placeholder="Имя"
      #ContactName="ngModel" 
      [(ngModel)]="service.formData.ContactName"
      required minlength="2" maxlength="50"></div>

      <div *ngIf="ContactName.invalid && (ContactName.dirty || ContactName.touched)" class="alert alert-danger">
        <div *ngIf="ContactName.errors?.['required']">
          Заполните это поле!
        </div>
        <div *ngIf="ContactName.errors?.['minlength'] || ContactName.errors?.['maxlength']">
          Имя должно содержать от 2 до 50 символов!
        </div>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label for="inputEmail" style="padding: 6px 1px 25px;" class="col-sm-2 col-form-label">Ваш Email:</label>
    <div class="col-sm-10">
      <div class="input-group mb-2">
      <div class="input-group-prepend">
        <div class="input-group-text"><i class="fa fa-envelope icon"></i></div>
      </div>
      <input type="email" class="form-control" name="Email" placeholder="Email"
      #Email="ngModel" 
      [(ngModel)]="service.formData.Email"
      required email></div>
      
      <div *ngIf="Email.invalid && (Email.dirty || Email.touched)" class="alert alert-danger">
        <div *ngIf="Email.errors?.['required']">
          Заполните это поле!
        </div>
        <div *ngIf="Email.errors?.['email']">
          Неверный формат Email!
        </div>
      </div>
    </div>
  </div>

  <div class="form-group row">
    <label for="inputPhone" style="font-size: 13px; padding: 6px 1px 25px;" class="col-sm-2 col-form-label">Ваш телефон:</label>
    <div class="col-sm-10">
      <div class="input-group mb-2">
        <div class="input-group-prepend">
          <div class="input-group-text"><i class="fa fa-phone icon"></i></div>
      </div>
      <input type="text" class="form-control" name="PhoneNumber" placeholder="Номер телефона"
      #PhoneNumber="ngModel" 
      [(ngModel)]="service.formData.PhoneNumber"
      required [mask]="'0 (000) 000-00-00'"></div>  
      
      <div *ngIf="PhoneNumber.invalid && (PhoneNumber.dirty || PhoneNumber.touched)" class="alert alert-danger">
        <div *ngIf="PhoneNumber.errors?.['required']">
          Заполните это поле!
        </div>
        <div *ngIf="PhoneNumber.errors?.['mask']">
          Неверный формат!
        </div>
      </div>
    </div>
  </div>
  
  <div class="col-auto my-1" style="display: flex !important; height: 30px !important;">
    <label class="mr-sm-2" style="padding: 6px 1px 25px;" for="inlineFormCustomSelect">Тема:</label>
    <select name="TopicID" 
    [(ngModel)]="service.topicData" 
    required
    class="custom-select mr-sm-2" id="inlineFormCustomSelect" style="width: 82%;margin-left: auto;"> 
      <option *ngFor="let topic of topicList | async" [ngValue]="topic">
        {{topic.topicName}}
      </option>
    </select>
  </div>

  <div data-mdb-input-init class="form-outline" style="    justify-content: space-between;margin-top: 15px; display:flex; flex-direction: row;">
    <label class="form-label" style="padding: 6px 1px 25px; width: 40px;" for="textAreaExample">Ваше сообщение:</label>
    <div data-mdb-input-init class="form-outline" style="margin-top: 15px; display:flex; flex-direction: column;">
      <textarea style="width: 390px;" class="form-control" id="textAreaExample1" name="Message" rows="4"
      name="Сообщение" #Message="ngModel" 
      [(ngModel)]="service.formData.Message"
      required minlength="1" maxlength="500"></textarea>
    
      <div style="display:flex; flex-direction: column;" *ngIf="Message.invalid && (Message.dirty || Message.touched)" class="alert alert-danger">
        <div *ngIf="Message.errors?.['required']">
          Заполните это поле
        </div>
      </div>
    </div>
    
  </div>

  <div class="form-group row" style="padding-top: 20px; display: flex; flex-direction: row; width: 500px;">
    <label for="inputPassword3" class="col-sm-2 col-form-label">Цифры:</label>
    <div class="col-sm-10" style="display: flex; flex-direction: row; align-items: center;">
      <input type="text" [(ngModel)]="userInput" name="captchaInput"  class="form-control" style="width: 200px;"
      required>
      <div class="captcha" style="display: flex; margin-left: 10px; user-select:none;">
        <div style="font-size: large; width: 80px;
        height: 50px;
        margin: 0 5px;
        border: 2px solid orange;
        color: orange;
        border-radius: 5px;
        font-size: 24px;
        background-image: url(https://thumbs.dreamstime.com/b/orange-grid-white-lines-chess-pattern-bright-orange-white-cell-bright-geometric-pattern-background-135293991.jpg);
        text-align: center;
        line-height: 50px;">
          {{ captchaText }}
        </div>
      </div>
    </div>  
    <div *ngIf="isCaptchaInvalid" class="alert alert-danger" style="margin-top: 20px;  margin-bottom: 1px;">
      Повторите попытку!
    </div>
  </div>
  
  <div class="form-group row" style="margin-left: 70px;">
    <div class="col-sm-10" style="margin-top: 20px;">
      <button type="submit" class="btn" style="background-color: #2C7865;color: white;">Отправить письмо!</button>
    </div>
  </div>
</form>